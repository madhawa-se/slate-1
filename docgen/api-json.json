{"openapi":"3.0.0","info":{"title":"CONNECTME API","description":"List of api endpoints","version":"1.2","contact":{}},"tags":[{"name":"messages","description":""}],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","in":"header","type":"http"}},"schemas":{"MessageRequestDto":{"type":"object","properties":{"direction":{"type":"object","description":"Message direction : recieve or send"},"to":{"type":"number","description":"User id of the recipent"},"companyName":{"type":"number","description":"depricated : remove"},"text":{"type":"function","description":"MessageContent"},"mediaUrl":{"type":"string","description":"Relative url of the media file (image,audio,video,document) for media messages"},"documentType":{"type":"object","description":"Type of the attached document. image, audio,video .."},"type":{"type":"object","description":"Type of the message"},"attachmentId":{"type":"number","description":"Attachment ID"}},"required":["direction","to","companyName","text","mediaUrl","documentType","type","attachmentId"]},"InMessage":{"type":"object","properties":{}},"MessageReport":{"type":"object","properties":{}},"NewChatRequest":{"type":"object","properties":{}},"RegisterUserDto":{"type":"object","properties":{}},"LoginUserDto":{"type":"object","properties":{"email":{"type":"string","description":"User email address"},"password":{"type":"string","description":"User password"}},"required":["email","password"]},"UpdateUserDto":{"type":"object","properties":{}},"ProfileDataDto":{"type":"object","properties":{"firstName":{"type":"string","description":"First name"},"lastName":{"type":"string","description":"Last name"},"phone":{"type":"string","description":"Phone number"},"userId":{"type":"string","description":"User id"}},"required":["firstName","lastName","phone","userId"]}}},"paths":{"/":{"get":{"operationId":"AppController_getApiInformation","parameters":[],"responses":{"200":{"description":""}},"tags":["Api"]}},"/message/message-page-list/{coversation_id}":{"get":{"operationId":"MessageController_getMessagesForConversation","summary":"Get paginated messages in a conversation","parameters":[{"name":"coversation_id","required":true,"in":"path","schema":{"type":"number"}},{"name":"page","required":true,"in":"query","description":"Page number","schema":{"type":"number"}},{"name":"limit","required":true,"in":"query","description":"Message limit","schema":{"type":"number"}}],"responses":{"200":{"description":"Conversation Page","content":{"application/json":{"schema":{"example":{"totalCount":585,"page":1,"limit":5,"data":[{"messageId":"1219ed11910a47d1aa8c202436fdff1e","conversationId":1,"direction":"SENT","content":"Hi , Whats up ?","datetime":"2021-01-08T08:55:30.422Z","status":"PENDING","attachments":[]},{"messageId":"744ed9d3e7114267b76297cbb00a232b","conversationId":1,"direction":"SENT","content":"\n","datetime":"2020-12-01T10:04:16.303Z","status":"PENDING","attachments":[{"attachmentId":31,"order":null,"type":"IMAGE","filename":"ice.jpg","filesize":289516}]},{"messageId":"7c6f8ee5b91e497d9cfddaaea9acf906","conversationId":1,"direction":"SENT","content":"\n","datetime":"2020-12-18T11:35:34.781Z","status":"PENDING","attachments":[{"attachmentId":97,"order":null,"type":"VIDEO","filename":"59f17da9-ced4-4f64-8a41-52ca08ed22f5-earth.mp4","filesize":3114374}]},{"messageId":"1079950cafbf4b9d978b04e746e4bcd1","conversationId":1,"direction":"RECEIVED","content":null,"datetime":"2020-12-17T03:18:34.472Z","status":"PENDING","attachments":[{"attachmentId":87,"order":null,"type":"AUDIO","filename":"768e708b-985a-4e9c-813f-4e718dc33748-media-1608175116539-incomming.mpga","filesize":5377729}]}]}}}}},"403":{"description":"you don't have access to this conversation"}},"tags":["Message"],"security":[{"bearer":[]}]}},"/message":{"post":{"operationId":"MessageController_create","summary":"Get paginated messages in a conversation","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageRequestDto"}}}},"responses":{"200":{"description":"Conversation Page","content":{"application/json":{"schema":{"example":{"totalCount":585,"page":1,"limit":5,"data":[{"messageId":"1219ed11910a47d1aa8c202436fdff1e","conversationId":1,"direction":"SENT","content":"Hi , Whats up ?","datetime":"2021-01-08T08:55:30.422Z","status":"PENDING","attachments":[]},{"messageId":"744ed9d3e7114267b76297cbb00a232b","conversationId":1,"direction":"SENT","content":"\n","datetime":"2020-12-01T10:04:16.303Z","status":"PENDING","attachments":[{"attachmentId":31,"order":null,"type":"IMAGE","filename":"ice.jpg","filesize":289516}]},{"messageId":"7c6f8ee5b91e497d9cfddaaea9acf906","conversationId":1,"direction":"SENT","content":"\n","datetime":"2020-12-18T11:35:34.781Z","status":"PENDING","attachments":[{"attachmentId":97,"order":null,"type":"VIDEO","filename":"59f17da9-ced4-4f64-8a41-52ca08ed22f5-earth.mp4","filesize":3114374}]},{"messageId":"1079950cafbf4b9d978b04e746e4bcd1","conversationId":1,"direction":"RECEIVED","content":null,"datetime":"2020-12-17T03:18:34.472Z","status":"PENDING","attachments":[{"attachmentId":87,"order":null,"type":"AUDIO","filename":"768e708b-985a-4e9c-813f-4e718dc33748-media-1608175116539-incomming.mpga","filesize":5377729}]}]}}}}},"403":{"description":"you don't have access to this conversation"}},"tags":["Message"],"security":[{"bearer":[]}]}},"/message/messagein":{"post":{"operationId":"MessageController_messageIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/InMessage"}}}},"responses":{"201":{"description":""}},"tags":["Message"]}},"/message/status":{"post":{"operationId":"MessageController_messageStatusIn","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MessageReport"}}}},"responses":{"201":{"description":""}},"tags":["Message"]}},"/message/new-chat":{"post":{"operationId":"MessageController_startNewChat","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewChatRequest"}}}},"responses":{"201":{"description":""}},"tags":["Message"]}},"/message/message-search/{term}":{"get":{"operationId":"MessageController_searchMessage","parameters":[],"responses":{"200":{"description":""}},"tags":["Message"]}},"/auth/signup":{"post":{"operationId":"AuthController_register","summary":"Signup to the system","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserDto"}}}},"responses":{"200":{"description":"Account created","content":{"application/json":{"schema":{"example":{"userId":1,"firstName":"madhawa","lastName":"samarawicrama","phone":"+94717936775"}}}}},"403":{"description":"Access forbidden to unconnected profiles","content":{"application/json":{"schema":{"example":{"name":"ice.jpg","size":289516,"documentType":"IMAGE","attachmentId":100}}}}}},"tags":["Authenticate"]}},"/auth/login":{"post":{"operationId":"AuthController_login","summary":"Login to the system","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"Login sucessfully","content":{"application/json":{"schema":{"example":{"name":"ice.jpg","size":289516,"documentType":"IMAGE","attachmentId":100}}}}},"403":{"description":"Login failed.please check the username and password and try again","content":{"application/json":{"schema":{"example":{"name":"ice.jpg","size":289516,"documentType":"IMAGE","attachmentId":100}}}}}},"tags":["Authenticate"]}},"/contact":{"get":{"operationId":"ContactController_getAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Contact"]},"put":{"operationId":"ContactController_update","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":""}},"tags":["Contact"]}},"/contact/search/{phone}":{"get":{"operationId":"ContactController_getMessagesForConversation","parameters":[],"responses":{"200":{"description":""}},"tags":["Contact"]}},"/conversation/chat-time-report/{conversationId}":{"get":{"operationId":"ConversationController_checkChatAvailibility","summary":"Get state of chat window ; whatsapp specific endpoint","parameters":[{"name":"conversationId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Chat window status","content":{"application/json":{"schema":{"example":{"lastFreeMessageTime":"2021-01-08T08:55:30.422Z","comparedTime":"2021-01-20T11:32:09.568Z","duration":0}}}}},"403":{"description":"you don't have access to this conversation"}},"tags":["Conversation"],"security":[{"bearer":[]}]}},"/conversation/conversation-page-list":{"get":{"operationId":"ConversationController_getPagedConversation","summary":"Get paginated conversation list for specific company","parameters":[{"name":"page","required":true,"in":"query","description":"Page number","schema":{"type":"number"}},{"name":"limit","required":true,"in":"query","description":"Message limit","schema":{"type":"number"}}],"responses":{"200":{"description":"Conversation Page","content":{"application/json":{"schema":{"example":{"totalCount":20,"page":"1","limit":"2","data":[{"conversationId":3,"companyId":1,"userId":143,"channelId":1,"lastUpdateTime":null,"lastFreeMessageTime":null,"user":{"userId":143,"firstName":"new","lastName":"user","phone":"+94775777794"}},{"conversationId":4,"companyId":1,"userId":144,"channelId":1,"lastUpdateTime":null,"lastFreeMessageTime":null,"user":{"userId":144,"firstName":"new","lastName":"user","phone":"+94717936771"}}]}}}}}},"tags":["Conversation"],"security":[{"bearer":[]}]}},"/media/save":{"post":{"operationId":"MediaController_saveAttachment","summary":"Save media to web server","parameters":[],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}}}}}},"responses":{"201":{"description":"Media saved successfully","content":{"application/json":{"schema":{"example":{"name":"ice.jpg","size":289516,"documentType":"IMAGE","attachmentId":100}}}}}},"tags":["Media"],"security":[{"bearer":[]}]}},"/template":{"get":{"operationId":"TemplateController_getAllTemplates","summary":"Get all Whatsapp message templates","parameters":[],"responses":{"200":{"description":"All messsage templates","content":{"application/json":{"schema":{"example":[{"content":"Hi {{1}}! Thanks for contacting Us.  We are happy to create your demo account and will send you login credentials shortly..","templateId":1},{"content":"Your {{1}} order of {{2}} has shipped and should be delivered on {{3}}. Details : {{4}}","templateId":2}]}}}}},"tags":["Template"],"security":[{"bearer":[]}]}},"/profile/{profileId}":{"get":{"operationId":"ProfileController_getProfile","summary":"Get the profile of a contact.","parameters":[{"name":"profileId","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"Get user rofile","content":{"application/json":{"schema":{"example":{"userId":1,"firstName":"madhawa","lastName":"samarawicrama","phone":"+94717936775"}}}}},"403":{"description":"Access forbidden to unconnected profiles","content":{"application/json":{"schema":{"example":{"status":403,"error":"Access forbidden to unconnected profiles2"}}}}}},"tags":["Profile"],"security":[{"bearer":[]}]}},"/profile":{"put":{"operationId":"ProfileController_update","summary":"Update contact profile information","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProfileDataDto"}}}},"responses":{"200":{"description":"Update sucessfull","content":{"application/json":{"schema":{"example":{"status":true,"message":"Profile Update sucessfully"}}}}},"403":{"description":"Access forbidden to unconnected profiles","content":{"application/json":{"schema":{"example":{"status":403,"error":"Access forbidden to unconnected profiles2"}}}}}},"tags":["Profile"],"security":[{"bearer":[]}]}}}}